<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: chart/chart.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: chart/chart.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import React, {Component} from 'react';
import * as d3 from "d3";

/** Represents the chart component made by d3js.
 * @class Chart
 * @extends Component
 * */
export default class Chart extends Component {
    /**
     * Initialization
     * @constructor
     * @param props
     */
    constructor(props) {
        super(props);
        this.createLineChart = this.createLineChart.bind(this);
    }

    /** Call chart builder when component is fully mounted
     * @function componentDidMount
     */
    componentDidMount() {
        this.createLineChart();
    }

    /** Recreate chart when props are updated
     * @function componentDidUpdate
     */
    componentDidUpdate() {
        // empty the chart before creating a new one
        d3.select('svg').html("");
        this.createLineChart();
    }

    /** Create line chart with props
     * @function createLineChart
     */
    createLineChart() {
        const data = this.props.items;
        const svgWidth = 800, svgHeight = 400;
        const margin = {top: 20, right: 20, bottom: 30, left: 50};
        const width = svgWidth - margin.left - margin.right;
        const height = svgHeight - margin.top - margin.bottom;

        const svg = d3.select('svg')
            .attr("width", svgWidth)
            .attr("height", svgHeight);

        const g = svg.append("g")
            .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

        const x = d3.scaleTime()
            .rangeRound([0, width]);

        const y = d3.scaleLinear()
            .rangeRound([height, 0]);

        const line = d3.line()
            .x((d) => x(new Date(d.date)))
            .y((d) => y(d.value ? d.value : 0))
            .curve(d3.curveCatmullRom.alpha(0.5));

        //define the x range
        x.domain(d3.extent(data, (d) => new Date(d.date)));
        //define the y ranger with start at 0 and max at item.value max +5 (to look better)
        y.domain([0, Math.max.apply(Math, data.map(item => item.value ? item.value : 0)) + 5]);

        g.append("g")
            .attr("transform", "translate(0," + height + ")")
            .call(d3.axisBottom(x))
            .select(".domain")
            .remove();

        g.append("g")
            .call(d3.axisLeft(y))
            .append("text")
            .attr("fill", "#000")
            .attr("transform", "rotate(-90)")
            .attr("y", 6)
            .attr("dy", "0.71em")
            .attr("text-anchor", "end")
            .text("Stock price (â‚¬)");

        g.append("path")
            .datum(data)
            .attr("fill", "none")
            .attr("stroke", "steelblue")
            .attr("stroke-linejoin", "round")
            .attr("stroke-linecap", "round")
            .attr("stroke-width", 3)
            .attr("d", line);
    }


    render() {
        return &lt;div>
            &lt;h2 className="title-lg">Stocks stats&lt;/h2>
            &lt;svg width={800}
                 height={400}>
            &lt;/svg>
        &lt;/div>;
    }
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="App.html">App</a></li><li><a href="Chart.html">Chart</a></li><li><a href="StatsTable.html">StatsTable</a></li></ul><h3>Global</h3><ul><li><a href="global.html#buildHtmlTable">buildHtmlTable</a></li><li><a href="global.html#changeItem">changeItem</a></li><li><a href="global.html#componentDidMount">componentDidMount</a></li><li><a href="global.html#componentDidUpdate">componentDidUpdate</a></li><li><a href="global.html#createLineChart">createLineChart</a></li><li><a href="global.html#enableInput">enableInput</a></li><li><a href="global.html#getStock">getStock</a></li><li><a href="global.html#handleMouseLeave">handleMouseLeave</a></li><li><a href="global.html#handleTableStocksChange">handleTableStocksChange</a></li><li><a href="global.html#updateStock">updateStock</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Thu Feb 28 2019 17:28:07 GMT+0100 (Paris, Madrid)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
